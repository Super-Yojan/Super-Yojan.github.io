---
// src/pages/index.astro
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Yojan - Research & Systems</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;600&family=JetBrains+Mono:wght@400&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <button id="theme-toggle" class="theme-btn" aria-label="Toggle Theme">
            <span class="sun-icon">☀</span>
            <span class="moon-icon">☾</span>
        </button>

        <div class="blueprint-grid"></div>
        <div class="vignette"></div>

        <main>
            <div class="visual-container fade-in">
                <svg
                    class="systems-loop"
                    viewBox="0 0 200 200"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <g class="state state-robotics">
                        <g class="robotic-arm">
                            <rect
                                x="20"
                                y="160"
                                width="40"
                                height="10"
                                class="arm-base"></rect>
                            <g class="arm-segment lower-arm-group">
                                <rect
                                    x="35"
                                    y="110"
                                    width="10"
                                    height="50"
                                    class="arm-link"></rect>
                                <circle cx="40" cy="160" r="8" class="joint"
                                ></circle>
                                <g class="arm-segment upper-arm-group">
                                    <rect
                                        x="35"
                                        y="70"
                                        width="10"
                                        height="40"
                                        class="arm-link"></rect>
                                    <circle cx="40" cy="110" r="6" class="joint"
                                    ></circle>
                                    <path
                                        d="M35 70 L30 60 M45 70 L50 60"
                                        class="gripper"></path>
                                </g>
                            </g>
                        </g>

                        <g class="rover">
                            <g class="rover-body-group">
                                <rect
                                    x="100"
                                    y="140"
                                    width="70"
                                    height="25"
                                    rx="4"
                                    class="rover-chassis"></rect>
                                <rect
                                    x="150"
                                    y="130"
                                    width="15"
                                    height="10"
                                    class="sensor-head"></rect>
                                <circle
                                    cx="157"
                                    cy="135"
                                    r="3"
                                    class="sensor-eye"></circle>
                            </g>
                            <circle cx="115" cy="165" r="12" class="wheel"
                            ></circle>
                            <circle cx="155" cy="165" r="12" class="wheel"
                            ></circle>
                        </g>
                    </g>

                    <g class="state state-audio">
                        <path
                            d="M10,100 Q50,50 100,100 T190,100"
                            class="wave w1"></path>
                        <path
                            d="M10,100 Q50,150 100,100 T190,100"
                            class="wave w2"></path>
                        <path
                            d="M10,100 Q50,20 100,100 T190,100"
                            class="wave w3"></path>
                        <rect
                            x="40"
                            y="140"
                            width="10"
                            height="20"
                            class="bar b1"></rect>
                        <rect
                            x="70"
                            y="140"
                            width="10"
                            height="40"
                            class="bar b2"></rect>
                        <rect
                            x="100"
                            y="140"
                            width="10"
                            height="30"
                            class="bar b3"></rect>
                        <rect
                            x="130"
                            y="140"
                            width="10"
                            height="50"
                            class="bar b4"></rect>
                    </g>

                    <g class="state state-pcb">
                        <rect
                            x="80"
                            y="80"
                            width="40"
                            height="40"
                            class="ic-body"></rect>

                        <circle cx="30" cy="30" r="6" class="pad"></circle>
                        <circle cx="170" cy="170" r="6" class="pad"></circle>
                        <circle cx="60" cy="120" r="3" class="via"></circle>
                        <circle cx="140" cy="80" r="3" class="via"></circle>

                        <path
                            d="M30 30 L50 30 L70 50 L70 130 L90 150 L150 150 L170 170"
                            class="trace t1"></path>
                        <path
                            d="M170 30 L150 50 L150 70 L130 90 L70 90 L50 110 L50 150"
                            class="trace t2"></path>

                        <circle cx="0" cy="0" r="3" class="electron e1"
                        ></circle>
                        <circle cx="0" cy="0" r="3" class="electron e2"
                        ></circle>
                    </g>

                    <g class="state state-embedded">
                        <rect
                            x="60"
                            y="60"
                            width="80"
                            height="80"
                            rx="10"
                            class="chip-body"></rect>
                        <line x1="60" y1="80" x2="40" y2="80" class="pin"
                        ></line>
                        <line x1="60" y1="100" x2="40" y2="100" class="pin"
                        ></line>
                        <line x1="60" y1="120" x2="40" y2="120" class="pin"
                        ></line>
                        <line x1="140" y1="80" x2="160" y2="80" class="pin"
                        ></line>
                        <line x1="140" y1="100" x2="160" y2="100" class="pin"
                        ></line>
                        <line x1="140" y1="120" x2="160" y2="120" class="pin"
                        ></line>
                        <text x="75" y="95" class="binary-text">1011</text>
                        <text x="75" y="115" class="binary-text">0101</text>
                    </g>
                </svg>
            </div>

            <div class="card-container">
                <header class="fade-in delay-1">
                    <div class="status-indicator">
                        <span class="dot"></span>
                        <span id="status-text">SYSTEM ONLINE</span>
                    </div>
                    <div class="academic-id">PHD RESEARCHER // GMU</div>
                </header>

                <h1 class="fade-in delay-2">
                    Autonomous<br />
                    <span class="highlight">Systems</span> &<br />
                    Control Theory.
                </h1>

                <p class="abstract fade-in delay-3">
                    Bridging the gap between high-level algorithms and hardware.
                    Focusing on <span class="mono">Rust-based frameworks</span> for
                    autonomous blimps and
                    <span class="mono">embedded audio synthesis</span>.
                </p>

                <div class="meta-grid fade-in delay-4">
                    <div class="meta-item">
                        <span class="label">CURRENT FOCUS</span>
                        <span class="value">Robotics</span>
                    </div>
                    <div class="meta-item">
                        <span class="label">TOOLKIT</span>
                        <span class="value">Rust / Zenoh / Python</span>
                    </div>
                    <div class="meta-item">
                        <span class="label">CREATIVE</span>
                        <span class="value">DSP / Production</span>
                    </div>
                </div>

                <div class="cta-group fade-in delay-5">
                    <a href="/blog" class="btn primary">Read Articles</a>
                    <a href="/projects" class="btn secondary"
                        >Engineering Logs</a
                    >
                </div>
            </div>
        </main>

        <script>
            const toggleBtn = document.getElementById("theme-toggle");
            const body = document.body;
            const statusText = document.getElementById("status-text");

            // Check local storage
            if (localStorage.getItem("theme") === "light") {
                body.classList.add("light-mode");
                if (statusText) statusText.innerText = "VISUAL MODE";
            }

            toggleBtn.addEventListener("click", () => {
                body.classList.toggle("light-mode");
                const isLight = body.classList.contains("light-mode");

                // Update Text & Storage
                if (statusText)
                    statusText.innerText = isLight
                        ? "VISUAL MODE"
                        : "SYSTEM ONLINE";
                localStorage.setItem("theme", isLight ? "light" : "dark");
            });
        </script>
    </body>
</html>

<style>
    /* --- VARIABLES --- */
    :root {
        /* DARK MODE (Default) */
        --bg: #0f1115;
        --text: #e0e0e0;
        --accent: #00e5ff; /* Cyan */
        --grid-color: rgba(255, 255, 255, 0.05);
        --border: rgba(255, 255, 255, 0.1);
        --mono-bg: rgba(255, 255, 255, 0.1);

        --font-main: "Inter", sans-serif;
        --font-code: "JetBrains Mono", monospace;
    }

    /* LIGHT MODE OVERRIDES */
    body.light-mode {
        --bg: #f4f4f4; /* Swiss Paper White */
        --text: #111111; /* Sharp Black */
        --accent: #ff3300; /* International Orange (Swiss Style) */
        --grid-color: rgba(0, 0, 0, 0.05);
        --border: rgba(0, 0, 0, 0.1);
        --mono-bg: rgba(0, 0, 0, 0.05);
    }

    body {
        margin: 0;
        background-color: var(--bg);
        color: var(--text);
        font-family: var(--font-main);
        height: 100vh;
        overflow-x: hidden;
        transition:
            background-color 0.3s ease,
            color 0.3s ease;
    }

    /* --- BACKGROUNDS --- */
    .blueprint-grid {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image:
            linear-gradient(var(--grid-color) 1px, transparent 1px),
            linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
        background-size: 40px 40px;
        z-index: 1;
    }

    .vignette {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, transparent 40%, var(--bg) 100%);
        z-index: 2;
        pointer-events: none;
        transition: background 0.3s ease;
    }

    /* --- LAYOUT --- */
    main {
        position: relative;
        z-index: 10;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4rem;
        padding: 2rem;
    }

    .card-container {
        max-width: 600px;
        width: 100%;
        border-left: 2px solid var(--accent);
        padding-left: 3rem;
        transition: border-color 0.3s ease;
    }

    /* --- SYSTEMS LOOP ANIMATION --- */
    .visual-container {
        width: 300px; /* Container size */
        height: 300px;
        position: relative;
    }

    .systems-loop {
        width: 100%;
        height: 100%;
        fill: none;
        stroke: var(--accent);
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        overflow: visible;
    }

    /* Shared State Animation: Cycles opacity of the 4 groups */
    .state {
        opacity: 0;
        animation: cycleStates 16s infinite;
    }
    .state-robotics {
        animation-delay: 0s;
    }
    .state-audio {
        animation-delay: 4s;
    }
    .state-pcb {
        animation-delay: 8s;
    }
    .state-embedded {
        animation-delay: 12s;
    }

    @keyframes cycleStates {
        0%,
        20% {
            opacity: 1;
            transform: scale(1);
            filter: blur(0);
        }
        25%,
        95% {
            opacity: 0;
            transform: scale(0.9);
            filter: blur(4px);
        }
    }

    /* --- ROBOTICS ANIMATIONS --- */
    .arm-base,
    .arm-link,
    .joint,
    .gripper {
        fill: var(--mono-bg);
        stroke: var(--accent);
    }
    .joint {
        fill: var(--accent);
    }
    .lower-arm-group {
        transform-origin: 40px 160px;
        animation: armSway 4s ease-in-out infinite alternate;
    }
    .upper-arm-group {
        transform-origin: 40px 110px;
        animation: armCurl 4s ease-in-out infinite alternate;
    }

    .rover-chassis,
    .sensor-head {
        fill: var(--mono-bg);
        stroke: var(--accent);
    }
    .rover-body-group {
        animation: roverBob 0.5s ease-in-out infinite alternate;
    }
    .sensor-eye {
        fill: var(--accent);
        stroke: none;
        animation: blink 3s infinite;
    }
    .wheel {
        fill: none;
        stroke: var(--accent);
        stroke-dasharray: 8 4;
        transform-origin: center;
        animation: 2s infinite linear;
    }

    /* --- AUDIO ANIMATIONS --- */
    .wave {
        animation: pulseWave 1s infinite alternate;
    }
    .w2 {
        animation-delay: 0.2s;
        opacity: 0.6;
    }
    .w3 {
        animation-delay: 0.4s;
        opacity: 0.3;
    }
    .bar {
        fill: var(--accent);
        stroke: none;
        animation: equalizer 0.5s infinite alternate;
        transform-origin: bottom;
    }
    .b2 {
        animation-duration: 0.4s;
    }
    .b3 {
        animation-duration: 0.6s;
    }
    .b4 {
        animation-duration: 0.3s;
    }

    /* --- PCB ANIMATIONS --- */
    .ic-body {
        fill: var(--mono-bg);
        stroke: var(--accent);
        opacity: 0.5;
    }
    .pad {
        fill: var(--bg);
        stroke: var(--accent);
        stroke-width: 3;
    }
    .via {
        fill: var(--accent);
        stroke: none;
    }
    .trace {
        opacity: 0.6;
    }
    .electron {
        fill: var(--text);
        opacity: 0;
        animation: flowPath 3s infinite linear;
    }
    .e1 {
        offset-path: path(
            "M30 30 L50 30 L70 50 L70 130 L90 150 L150 150 L170 170"
        );
    }
    .e2 {
        offset-path: path(
            "M170 30 L150 50 L150 70 L130 90 L70 90 L50 110 L50 150"
        );
        animation-delay: 1.5s;
    }

    /* --- EMBEDDED ANIMATIONS --- */
    .chip-body {
        fill: var(--mono-bg);
        stroke: var(--accent);
    }
    .binary-text {
        font-family: var(--font-code);
        font-size: 14px;
        fill: var(--accent);
        stroke: none;
        animation: binaryFlash 0.5s infinite steps(2);
    }

    /* --- TYPOGRAPHY --- */
    header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
        font-family: var(--font-code);
        font-size: 0.75rem;
        letter-spacing: 1px;
        color: var(--text);
        opacity: 0.6;
    }

    .status-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--accent);
    }
    .dot {
        width: 8px;
        height: 8px;
        background: var(--accent);
        border-radius: 50%;
        box-shadow: 0 0 10px var(--accent);
        animation: pulse 3s infinite;
        transition:
            background 0.3s ease,
            box-shadow 0.3s ease;
    }

    h1 {
        font-size: 4rem;
        font-weight: 300;
        line-height: 1.1;
        margin: 0 0 1.5rem 0;
        letter-spacing: -0.03em;
    }

    .highlight {
        font-weight: 600;
        color: transparent;
        -webkit-text-stroke: 1px var(--text);
    }
    body.light-mode .highlight {
        color: var(--accent);
        -webkit-text-stroke: 0;
    }

    .abstract {
        font-size: 1.1rem;
        line-height: 1.7;
        color: var(--text);
        opacity: 0.8;
        margin-bottom: 2.5rem;
        max-width: 90%;
    }

    .mono {
        font-family: var(--font-code);
        color: var(--accent);
        background: var(--mono-bg);
        padding: 0 4px;
        font-size: 0.9em;
    }

    /* --- DATA GRID --- */
    .meta-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin-bottom: 3rem;
        border-top: 1px solid var(--border);
        padding-top: 1.5rem;
    }
    .meta-item {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }
    .label {
        font-family: var(--font-code);
        font-size: 0.65rem;
        color: var(--text);
        opacity: 0.5;
        text-transform: uppercase;
    }
    .value {
        font-size: 0.9rem;
        font-weight: 600;
    }

    /* --- BUTTONS --- */
    .cta-group {
        display: flex;
        gap: 1.5rem;
    }

    .btn {
        text-decoration: none;
        font-family: var(--font-code);
        font-size: 0.9rem;
        text-transform: uppercase;
        padding-bottom: 0.25rem;
        border-bottom: 1px solid transparent;
        transition: all 0.2s;
        color: var(--text);
    }

    .primary {
        color: var(--accent);
        border-bottom: 1px solid var(--accent);
    }
    .primary:hover {
        background: var(--mono-bg);
        padding: 0.5rem 1rem;
        border: 1px solid var(--accent);
        margin: -0.5rem -1rem;
    }

    .secondary:hover {
        color: var(--accent);
        border-bottom-color: var(--accent);
    }

    /* --- THEME TOGGLE --- */
    .theme-btn {
        position: fixed;
        top: 2rem;
        right: 2rem;
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text);
        padding: 0.5rem;
        cursor: pointer;
        z-index: 100;
        font-size: 1.2rem;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
    }
    .theme-btn:hover {
        border-color: var(--accent);
        color: var(--accent);
    }

    .sun-icon {
        display: none;
    }
    body.light-mode .sun-icon {
        display: block;
    }
    body.light-mode .moon-icon {
        display: none;
    }

    /* --- ANIMATION KEYFRAMES --- */
    .fade-in {
        opacity: 0;
        animation: fadeInUp 0.8s ease forwards;
    }
    .delay-1 {
        animation-delay: 0.2s;
    }
    .delay-2 {
        animation-delay: 0.4s;
    }
    .delay-3 {
        animation-delay: 0.6s;
    }
    .delay-4 {
        animation-delay: 0.8s;
    }
    .delay-5 {
        animation-delay: 1s;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    @keyframes pulse {
        0% {
            opacity: 0.5;
        }
        50% {
            opacity: 1;
        }
        100% {
            opacity: 0.5;
        }
    }
    @keyframes spin {
        100% {
            transform: rotate(360deg);
        }
    }
    @keyframes roverBob {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(-3px);
        }
    }
    @keyframes armSway {
        0% {
            transform: rotate(-10deg);
        }
        100% {
            transform: rotate(5deg);
        }
    }
    @keyframes armCurl {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(30deg);
        }
    }
    @keyframes pulseWave {
        0% {
            d: path("M10,100 Q50,50 100,100 T190,100");
        }
        100% {
            d: path("M10,100 Q50,150 100,100 T190,100");
        }
    }
    @keyframes equalizer {
        0% {
            transform: scaleY(0.3);
        }
        100% {
            transform: scaleY(1);
        }
    }
    @keyframes flowPath {
        0% {
            offset-distance: 0%;
            opacity: 1;
        }
        90% {
            opacity: 1;
        }
        100% {
            offset-distance: 100%;
            opacity: 0;
        }
    }
    @keyframes binaryFlash {
        0% {
            opacity: 1;
        }
        100% {
            opacity: 0.5;
        }
    }
    @keyframes blink {
        0%,
        45%,
        55%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0.2;
        }
    }

    /* Mobile */
    @media (max-width: 900px) {
        h1 {
            font-size: 2.5rem;
        }
        main {
            flex-direction: column;
            gap: 2rem;
            padding-top: 5rem;
        }
        .visual-container {
            width: 200px;
            height: 200px;
        }
        .card-container {
            padding-left: 1.5rem;
            border-left-width: 1px;
        }
        .meta-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
    }
</style>
